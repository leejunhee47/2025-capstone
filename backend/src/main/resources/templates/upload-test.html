<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>영상 업로드 테스트</title>
    <style>
        body { font-family: sans-serif; display: grid; place-items: center; min-height: 90vh; }
        #upload-form { width: 500px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }

        /* 1. 드래그 앤 드롭 영역 */
        #drop-zone {
            border: 3px dashed #ccc;
            border-radius: 8px;
            padding: 50px;
            text-align: center;
            color: #777;
            cursor: pointer;
            transition: border-color 0.3s, background-color 0.3s;
        }

        /* 2. 드래그 시 시각적 피드백 */
        #drop-zone.drag-over {
            border-color: #007bff;
            background-color: #f0f8ff;
        }

        /* 3. 실제 파일 input은 숨김 */
        #file-input {
            display: none;
        }

        #file-name {
            margin-top: 10px;
            font-weight: bold;
            color: #333;
        }

        button {
            width: 100%;
            padding: 10px;
            margin-top: 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover { background-color: #0056b3; }
    </style>
</head>
<body>

<div id="upload-form">
    <h3>영상 업로드</h3>

    <form id="form" action="/upload/video" method="POST" enctype="multipart/form-data">

        <div id="drop-zone">
            <p>여기에 파일을 드래그하세요</p>
            <p>또는 클릭해서 파일 선택</p>
            <input type="file" name="file" id="file-input" accept="video/*" />
        </div>

        <p id="file-name"></p>

        <button type="submit">업로드</button>
    </form>
</div>

<script>
    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');
    const fileNameDisplay = document.getElementById('file-name');

    // 드롭 영역 클릭 시 파일 input 클릭
    dropZone.addEventListener('click', () => {
        fileInput.click();
    });

    // 파일 input 변경 시(파일 선택 시) 파일 이름 표시
    fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            fileNameDisplay.textContent = fileInput.files[0].name;
        }
    });

    // --- 드래그 앤 드롭 로직 ---

    // 1. 드래그 오버: 시각적 피드백
    dropZone.addEventListener('dragover', (e) => {
        e.preventDefault(); // 기본 이벤트(파일 열기) 방지
        dropZone.classList.add('drag-over');
    });

    // 2. 드래그 리브: 시각적 피드백 제거
    dropZone.addEventListener('dragleave', (e) => {
        e.preventDefault();
        dropZone.classList.remove('drag-over');
    });

    // 3. 드롭: 파일 처리
    dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('drag-over');

        // 드롭된 파일 가져오기
        const files = e.dataTransfer.files;

        if (files.length > 0) {
            // (중요) 드롭된 파일을 숨겨진 file input의 파일로 설정
            fileInput.files = files;
            // 파일 이름 표시
            fileNameDisplay.textContent = files[0].name;
        }
    });
</script>

</body>
</html>